{"ast":null,"code":"import _regeneratorRuntime from\"/Users/arunmehra/Desktop/chatApp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/arunmehra/Desktop/chatApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/arunmehra/Desktop/chatApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{ChatState}from'../Context/ChatProvider';import{Box,Button,Stack,Text,useToast}from'@chakra-ui/react';import{useEffect}from'react';import{AddIcon}from'@chakra-ui/icons';import ChatLoading from'./ChatLoading';import{getSender}from'../config/ChatLogics';import GroupChatModal from'./misc/GroupChatModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyChats=function MyChats(_ref){var fetchAgain=_ref.fetchAgain;var _ChatState=ChatState(),selectedChat=_ChatState.selectedChat,setSelectedChat=_ChatState.setSelectedChat,user=_ChatState.user,chats=_ChatState.chats,setChats=_ChatState.setChats;var _useState=useState(),_useState2=_slicedToArray(_useState,2),loggedUser=_useState2[0],setLoggedUser=_useState2[1];var toast=useToast();var fetchChats=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{Authorization:\"Bearer \".concat(user.token)}};_context.next=4;return axios.get(\"/api/chat\",config);case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);setChats(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);toast({title:\"Something went wrong!\",status:\"error\",duration:5000,isClosable:true,position:\"bottom-left\",description:\"Error occured while fetching chats\"});case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchChats(){return _ref2.apply(this,arguments);};}();useEffect(function(){setLoggedUser(JSON.parse(localStorage.getItem('userInfo')));fetchChats();},[fetchAgain]);return/*#__PURE__*/_jsxs(Box,{display:{base:selectedChat?\"none\":\"flex\",md:\"flex\"},flexDir:\"column\",alignItems:\"center\",p:3,bg:\"white\",w:{base:\"100%\",md:\"31%\"},borderRadius:\"lg\",borderWidth:\"1px\",children:[/*#__PURE__*/_jsxs(Box,{pb:3,px:3,fontSize:{base:\"28px\",md:\"30px\"},fontFamily:\"Work sans\",display:\"flex\",w:\"100%\",justifyContent:\"space-between\",alignItems:\"center\",children:[\"My Chats\",/*#__PURE__*/_jsx(GroupChatModal,{children:/*#__PURE__*/_jsx(Button,{display:\"flex\",fontSize:{base:\"17px\",md:\"10px\",lg:\"17px\"},rightIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"New Group Chat\"})})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDir:\"column\",p:3,bg:\"#F8F8F8\",w:\"100%\",h:\"100%\",borderRadius:\"lg\",overflowY:\"hidden\",children:chats?/*#__PURE__*/_jsx(Stack,{overflowY:\"scroll\",children:chats.map(function(chat){return/*#__PURE__*/_jsx(Box,{onClick:function onClick(){return setSelectedChat(chat);},cursor:\"pointer\",bg:selectedChat===chat?\"purple.500\":\"#E8E8E8\",color:selectedChat===chat?\"white\":\"black\",px:3,py:2,borderRadius:\"lg\",children:/*#__PURE__*/_jsx(Text,{children:!chat.isGroupChat?getSender(loggedUser,chat.users):chat.chatName})},chat._id);})}):/*#__PURE__*/_jsx(ChatLoading,{})})]});};export default MyChats;","map":{"version":3,"names":["React","useState","axios","ChatState","Box","Button","Stack","Text","useToast","useEffect","AddIcon","ChatLoading","getSender","GroupChatModal","jsx","_jsx","jsxs","_jsxs","MyChats","_ref","fetchAgain","_ChatState","selectedChat","setSelectedChat","user","chats","setChats","_useState","_useState2","_slicedToArray","loggedUser","setLoggedUser","toast","fetchChats","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$get","data","wrap","_callee$","_context","prev","next","headers","Authorization","concat","token","get","sent","console","log","t0","title","status","duration","isClosable","position","description","stop","apply","arguments","JSON","parse","localStorage","getItem","display","base","md","flexDir","alignItems","p","bg","w","borderRadius","borderWidth","children","pb","px","fontSize","fontFamily","justifyContent","lg","rightIcon","h","overflowY","map","chat","onClick","cursor","color","py","isGroupChat","users","chatName","_id"],"sources":["/Users/arunmehra/Desktop/chatApp/frontend/src/components/MyChats.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { ChatState } from '../Context/ChatProvider';\nimport { Box, Button, Stack, Text, useToast } from '@chakra-ui/react';\nimport { useEffect } from 'react';\nimport { AddIcon } from '@chakra-ui/icons';\nimport ChatLoading from './ChatLoading';\nimport { getSender } from '../config/ChatLogics'\nimport GroupChatModal from './misc/GroupChatModal';\n\n\nconst MyChats = ({fetchAgain}) => {\n    const { selectedChat, setSelectedChat, user, chats, setChats } = ChatState()\n    const [loggedUser, setLoggedUser] = useState();\n    const toast = useToast();\n\n    const fetchChats = async () => {\n        try {\n            const config = {\n                headers: {\n                    Authorization: `Bearer ${user.token}`,\n                },\n            };\n            const { data } = await axios.get(\"/api/chat\", config);\n            console.log(data);\n            setChats(data);\n        }\n        catch (error) {\n            toast({\n                title: \"Something went wrong!\",\n                status: \"error\",\n                duration: 5000,\n                isClosable: true,\n                position: \"bottom-left\",\n                description: \"Error occured while fetching chats\",\n            });\n        }\n    }\n\n    useEffect(() => {\n        setLoggedUser(JSON.parse(localStorage.getItem('userInfo')));\n        fetchChats();\n    }, [fetchAgain]);\n\n    return (\n        <Box\n            display={{ base: selectedChat ? \"none\" : \"flex\", md: \"flex\" }}\n            flexDir=\"column\"\n            alignItems=\"center\"\n            p={3}\n            bg=\"white\"\n            w={{ base: \"100%\", md: \"31%\" }}\n            borderRadius=\"lg\"\n            borderWidth=\"1px\"\n        >\n            <Box\n                pb={3}\n                px={3}\n                fontSize={{ base: \"28px\", md: \"30px\" }}\n                fontFamily=\"Work sans\"\n                display=\"flex\"\n                w=\"100%\"\n                justifyContent=\"space-between\"\n                alignItems=\"center\"\n            >\n                My Chats\n            <GroupChatModal>\n                <Button\n                    display=\"flex\"\n                    fontSize={{ base: \"17px\", md: \"10px\",lg:\"17px\"  }}\n                    rightIcon={<AddIcon />}\n                    >New Group Chat</Button>\n            </GroupChatModal>\n            </Box>\n            <Box\n                display=\"flex\"\n                flexDir=\"column\"\n                p={3}\n                bg='#F8F8F8'\n                w=\"100%\"\n                h=\"100%\"\n                borderRadius=\"lg\"\n                overflowY=\"hidden\"\n                >\n                    {chats ? (\n                            <Stack overflowY='scroll' >\n                                {chats.map((chat) => (\n                                    <Box\n                                        onClick={() => setSelectedChat(chat)}\n                                        cursor=\"pointer\"\n                                        bg={selectedChat === chat ? \"purple.500\" : \"#E8E8E8\"}\n                                        color={selectedChat === chat ? \"white\" : \"black\"}\n                                        px={3}\n                                        py={2}\n                                        borderRadius=\"lg\"\n                                        key={chat._id}\n                                        >\n                                           <Text>\n                                                {!chat.isGroupChat ? (getSender(loggedUser,chat.users)) : (chat.chatName)}\n                                            </Text>\n                                    </Box>\n                                ))}\n                            </Stack>\n                        ) : (\n                            <ChatLoading />\n                        )\n                        }\n\n            </Box>\n        </Box>\n    );\n}\n\nexport default MyChats;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}